## ChatRoom 客户端开发进度

### [2025-11-30] 初始化

- 创建空项目，基于 Qt 5.14.2 开发
- 创建登录和注册界面，实现基本的 UI 布局
- 主页面设置为死代码，直接为登录页面，以及登录注册的切换部分
- 登录与注册页面设置样式为米白色

### [2025-12-01]

- 增加注册页面密码输入样式
- 增加快捷键绑定 ctrl + q 以调用 close，弥补 hyprland 下无法通过标题栏关闭窗口的问题
- 增加刷新样式函数，并为注册页面增加一个 error_msg_label 用于显示错误信息，封装 show_tip 函数用于显示错误信息
- 增加注册页面的获取验证码按钮槽函数，只检查邮箱格式
- 增加 Defer 定义，模仿 Go 语言的 defer 关键字，方便资源释放
- 增加 Global 的枚举定义
- 增加 HttpManager 类，封装 HTTP 的 POST 请求功能
- 增加注册页面回调处理函数，有一个 _handlers，暂未实现具体功能

### [2025-12-03]

- 抽离配置文件 config.ini
- 完善客户端发送验证码功能

### [2025-12-09]

- 更改网络管理器，即使返回 4xx 也会在信号中发布信息
- 完善注册功能，确保有网络问题可以正常打印服务器返回的错误信息

### [2025-12-10]

- 修改 LoginDialog 的信号为大驼峰命名法，因为是共有的
- 修改 MainWindow 的管理为父子机制，而非智能指针，界面的管理采用 stackedWidget 进行管理
- 实现定时按钮基类封装，可自动显示倒计时按钮
- 注册页面: 设置初始页面为 Page，安装过滤器，对五个输入框的焦点缺失事件进行校验，密码和确认密码搞了个眼睛切换显示密码功能，还有小手图标，注册成功后，等待5s/手动返回/page的取消按钮都会返回登录页面，并重置注册页面

### [2025-12-11]

- 重置密码页面，增加重置密码的 UI 界面，以及发送逻辑，基本与登录页面一致
- 融入 login 和 mainwindow，联调完成
- login 页面的忘记密码切换小手样式，和浮动样式

### [2025-12-12]

- httpmanager 增加一个处理 Login 模块的函数
- 完善登录页面，所有模块进行动态检查，以及登录按钮的使能状态
- 补充 main.cc 对重置页面的样式加载
- 在 mainwindow 中切换到其他页面对登录页面进行重置
- 增加 ServerInfo 类，用于保存 TCP 服务器信息
- 更换头像图片为新图片
- 修改 serverinfo 的 port 为 uint16_t，避免端口为 0 的情况
- 增加 TCP 管理者，串通端口逻辑，实现 TCP 连接

### [2025-12-13]

- 增加用户信息类 UserInfo，用于保存用户信息，在 tcp 登录后设置此信息

### [2025-12-14]

- Http 请求头增加 keep-alive，避免频繁创建连接
- 将 uuid 移动到 userinfo 中，jwt-token 同样如此，而不是在 serverinfo 中，确保 serverinfo 只保存服务器信息

### [2025-12-15]

- 增加聊天界面占位，完善流程
- 修改 ctrl + q，明确关闭 tcp 连接

### [2025-12-19]

- 更新后端路由名称，为后续 nginx 反向代理做准备
- 完善文档，包括 README.md 和 develop.md
- 增加部署脚本，用于一键部署，并更新发布的 ci.yml 文件

### [2025-12-30]

- 新增 `ChatUserItem` 组件，用于显示聊天用户列表项（头像、昵称、消息预览、时间）
- 新增 `ChatUserList` 组件，继承 `QListWidget`，支持滚动到底部加载更多、鼠标悬停显示滚动条
- 完善 `ChatDialog` 聊天界面布局：
  - 左侧边栏（头像、联系人入口）
  - 中间用户列表区（搜索框 + 添加按钮 + 用户列表）
  - 右侧聊天区（标题栏 + 消息区 + 工具栏 + 输入框 + 发送按钮）
- 新增 `UIConstants` 命名空间，集中管理 UI 常量（窗口尺寸、组件高度等）
- 新增 `main.qss` 全局样式和 `chat_window.qss` 聊天界面样式
- 新增资源文件：测试头像（head_1/2/3.jpg）、搜索图标、清除图标、添加好友图标
- 主窗口切换到聊天界面时自动调整窗口尺寸

### [2026-01-01]

- 新增 `ChatPage` 组件，将聊天主体区域从 `ChatDialog` 中抽离，包含标题栏、消息列表、工具栏、输入框和发送按钮
- 新增 `ChatMsgList` 组件，继承 `QListWidget`，支持滚动到顶部加载历史消息、鼠标悬停显示滚动条、防抖处理
- 新增 `ChatMsgItem` 组件（占位），用于显示单条聊天消息气泡，暂未实现具体内容显示
- 新增 `ChatTextEdit` 组件，自定义聊天输入框
- 新增 `LoadingItem` 组件，用于显示加载动画
- 完善 `ChatUserList`，增加滚动到底部加载更多用户的防抖处理
- 新增资源文件：加载动画（loading.gif）、表情图标（smile_idle/hover.png）、文件图标（folder_idle/hover.png）
- 完善 `chat_window.qss` 样式表，新增 ChatPage、ChatMsgList、ChatTextEdit、LoadingItem 等组件样式
- 代码重构：全面应用 clang-format 格式化、信号槽参数改为 const 引用传递、变量命名规范化
